<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Page</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f0f0f0; }
    .post-card { background: white; margin: 10px; padding: 10px; border-radius: 10px; position: relative; }
    .post-header { display: flex; align-items: center; }
    .post-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; margin-right: 10px; }
    .post-name { font-weight: bold; }
    .post-time { font-size: 12px; color: gray; }
    .post-text { margin: 10px 0; white-space: pre-wrap; }
    .post-images img { width: 100%; max-height: 200px; object-fit: cover; border-radius: 10px; margin-top: 10px; }
    .dot-menu { position: absolute; right: 10px; top: 10px; font-size: 18px; cursor: pointer; }
  </style>
</head>
<body>
  <div id="post-list"></div>

  <script>
    function timeSince(date) {
      const seconds = Math.floor((new Date() - new Date(date)) / 1000);
      const intervals = [
        { label: "year", seconds: 31536000 },
        { label: "month", seconds: 2592000 },
        { label: "day", seconds: 86400 },
        { label: "hour", seconds: 3600 },
        { label: "minute", seconds: 60 },
        { label: "second", seconds: 1 },
      ];
      for (const interval of intervals) {
        const count = Math.floor(seconds / interval.seconds);
        if (count >= 1) return `${count} ${interval.label}${count > 1 ? "s" : ""} ago`;
      }
      return "Just now";
    }

    const postList = document.getElementById("post-list");
    const posts = JSON.parse(localStorage.getItem("posts") || "[]");

    posts.forEach(post => {
      const div = document.createElement("div");
      div.className = "post-card";
      div.innerHTML = `
        <div class="post-header">
          <img src="${post.userAvatar}" class="post-avatar">
          <div>
            <div class="post-name">${post.userName}</div>
            <div class="post-time">${timeSince(post.timestamp)}</div>
          </div>
          <div class="dot-menu">â‹®</div>
        </div>
        <div class="post-text" style="${post.background ? `background-image:url('${post.background}');background-size:cover;color:white;padding:10px;border-radius:10px;` : ''}">
          ${post.text || ''}
        </div>
        <div class="post-images">
          ${(post.images || []).map(img => `<img src="${img}">`).join('')}
        </div>
        ${post.event ? `<div style="margin-top: 10px; font-style: italic; color: #555;">Event: ${post.event}</div>` : ''}
      `;
      postList.appendChild(div);
    });
  </script>
</body>
</html>